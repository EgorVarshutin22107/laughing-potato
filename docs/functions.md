# Функциональные модели
-----------------------------------------------------

## Описание сценария использования в формате пинг-понга 

### Создание нового персонажа

1. **Пользователь запускает игру:**
   - Пользователь выбирает опцию "Запустить игру", если хочет начать игру.
   - Генерируется лабиринт с монетами и персонажем

2. **Пользователь выходит из игры**
   - Пользователь выбирает "Выйти из игры", если он передумал начинать игру
   - Приложение закрывается

### Перемещение по лабиринту

1. **Пользователь использует клавиши управления:**
   - Пользователь нажимает стрелочные клавиши для перемещения по лабиринту.
   - Приложение обрабатывает ввод пользователя и перемещает персонажа соответственно.

### Сбор монеток

1. **Пользователь подходит к монетке:**
   - Пользователь перемещает персонажа к монетке.
 
2. **Пользователь подбирает монетку:**
   - Пользователь проходит через монетку.
   - Приложение увеличивает количество монеток у персонажа и счетчик монет увеличивается.

3. **Персонаж подбирает монетку-замедляку"**
   - Проходит через монетку
   - Накладывается эффект замедления на 5 секунд 

### Завершение игры
 
1. **Проигрыш из-за временного ограничения:**
   - Прошло 120 секунд.
   - Приложение завершает игру и выводит статистику.

2. **Выход из игры:**
   - Пользователь нажимает кнопку "ё" на клавиатуре.
   - Приложение спрашивает подтверждение действий пользователя
   - Пользователь нажимает на Выйти из игры
   - Приложение перекидывает пользователя в главное меню

3. **Остаться в игре**
   - Пользователь нажимает кнопку "ё" на клавиатуре.
   - Приложение спрашивает подтверждение действий пользователя
   - Пользователь нажимает на "Отмена"
   - Игра продолжается
	
---------------------------------------------------------------------
## Диаграмма вариантов использования приложения

```mermaid
stateDiagram-v2
    state "Пользователь" as user
    state "Главное меню" as mainMenu
    state "Приложение закрывается" as appClose
    state "Лабиринт с монетами и персонажем" as maze
    state "Перемещение по лабиринту" as moving
    state "Персонаж перемещается" as characterMove
    state "Сбор монет" as collectCoins
    state "Увеличить счетчик монет" as incrementCoins
    state "Замедление на 5 секунд" as slowDown
    state "Завершение игры" as endGame
    state "Конец игры" as gameOver
    state "Подтверждение выхода" as confirmExit
    state "Вернуться в главное меню" as returnToMenu

    [*] --> mainMenu
    mainMenu --> maze: Генерация лабиринта
    mainMenu --> appClose: Выйти из игры 

    maze --> moving: Использовать клавиши управления
    moving --> characterMove: Нажать стрелочную клавишу

    maze --> collectCoins: Переместиться к монетке
    collectCoins --> incrementCoins: Пройти через монетку
    collectCoins --> slowDown: Пройти через замедляющую монетку

    maze --> endGame: Истекло время 120 секунд
    endGame --> gameOver: Вывести статистику

    maze --> confirmExit: Нажать кнопку ё
    confirmExit --> returnToMenu: Нажать Выйти из игры
    confirmExit --> maze: Нажать Отмена

    returnToMenu --> appClose: Выход из игры
	
```


---------------------------------------------------------------------
## Диаграммы активности

### Основной циклс игры

```mermaid
stateDiagram-v2
    [*] --> ГлавноеМеню
    ГлавноеМеню --> НастройкаУровня : "Выбрать 'Начать Игру'"
    ГлавноеМеню --> Выход : "Выбрать 'Выйти' или закрыть окно"
    
    НастройкаУровня --> Игра : "Уровень настроен"
    
    Игра --> Пауза : "Нажата клавиша выхода"
    Игра --> КонецИгры : "Время истекло или достигнут конец лабиринта"
    
    Пауза --> Игра : "Выбор 'Остаться'"
    Пауза --> ГлавноеМеню : "Выбор 'Да'"
    
    КонецИгры --> ПоказСтатистики : "Показать статистику"
    ПоказСтатистики --> ГлавноеМеню : "Показ статистики завершён"
    Выход --> [*]
```


### Сбор монет и завершение игры

```mermaid
stateDiagram-v2
    [*] --> Ожидание
    Ожидание --> ПроверкаМонетки : "Персонаж перемещается"
    ПроверкаМонетки --> СборМонетки : "Персонаж на монетке"
    ПроверкаМонетки --> ПроверкаКонца : "Персонаж у конца лабиринта"
    
    СборМонетки --> ОбновлениеСчётчикаМонет : "Монета собрана"
    ОбновлениеСчётчикаМонет --> Ожидание
    
    ПроверкаКонца --> ЗавершениеИгры : "Достигнут конец лабиринта"
    ПроверкаКонца --> ПроверкаВремени : "Проверить оставшееся время"
    
    ПроверкаВремени --> ЗавершениеИгры : "Время истекло"
    ПроверкаВремени --> Ожидание : "Время есть"
    
    ЗавершениеИгры --> ПоказСтатистики : "Показать статистику"
    ПоказСтатистики --> [*] : "Статистика показана"
```


### Движение игрока

```mermaid
stateDiagram-v2
    [*] --> Ожидание
    Ожидание --> ДвижениеВлево : "Нажата стрелка влево"
    Ожидание --> ДвижениеВправо : "Нажата стрелка вправо"
    Ожидание --> ДвижениеВверх : "Нажата стрелка вверх"
    Ожидание --> ДвижениеВниз : "Нажата стрелка вниз"
    
    ДвижениеВлево --> ПроверкаСтолкновения : "Сдвинуться влево"
    ДвижениеВправо --> ПроверкаСтолкновения : "Сдвинуться вправо"
    ДвижениеВверх --> ПроверкаСтолкновения : "Сдвинуться вверх"
    ДвижениеВниз --> ПроверкаСтолкновения : "Сдвинуться вниз"
    
    ПроверкаСтолкновения --> ОбработкаСтолкновения : "Обнаружено столкновение"
    ПроверкаСтолкновения --> ОбновлениеПозиции : "Нет столкновений"
    
    ОбработкаСтолкновения --> Ожидание : "Коррекция позиции"
    ОбновлениеПозиции --> Ожидание : "Позиция обновлена"
```